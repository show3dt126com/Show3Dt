设计思想

大地坐标系 DDX
    数据点用LBH表示，用于原始数据，声场数据、DEM数据、声源数据等的存储。

声场区  Field
    长方体形状的3维网格点，每个点有一个代表某种特性的数值。
    特性如声场强度、海水温度、海水盐度等。

声源 Source
    声源为一个位置点，有频率、发射功率等参数。

场区 Range
    多个声场区范围的合集，或者以指定的声场区范围为准。
    经度方向为场区长度W，纬度方向为场区宽度H，深度方向为D。
    设场区水平面对角线为长度D，一半为D2。

世界坐标系 World
    场区海水面（深度为0）中心为坐标系原点，东为X，上为Y，南为Z。
    与OpenGL的坐标系定义一致。

相机坐标系  Camera
    相机焦点为原点，从原点向前为前向量（眼睛看的方向），右向量、上向量。
    相机坐标在世界坐标系定义。
    相机俯仰角Cf，偏转角Cp，滚动角Cg。
    与OpenGL相同，用于获取投影、视图等相关矩阵。

模型矩阵 Model
    以实际尺寸建模，因此模型矩阵为单位矩阵。

2D和3D视图模式控制建模方式。
俯视图和侧视图控制相机位置和移动。
二者可以组合。

2D视图
    仅显示一个平面的图像，平面与相机焦平面平行。
    俯视图下，仅显示一个深度平面（Dv）。
    侧视图下仅显示一个纵切面。

3D视图
    根据3D视图建模参数，构建等值体表面模型。
    用切空参数排除部分区域。
    用场强值分档参数排除部分数据。
    3D视图下，相机的移动也限制在2D视图俯视图、侧视图相同的范围内。

俯视图 LookDown
    相机前向量垂直向下，偏转角不变，滚动角CgF变化（0 ~ 360）。
    相机中心点在水平面投影点为CDo。
    限制CDo的移动范围为水平范围。
    在3D模式下，相机的俯仰角可在一定范围变化（-CfFv ~ +CfFv），同时影响前向量。
    在3D模式下，相机可上下移动。

侧视图 LookSide
    相机前向量与水平面平行，滚动角不变，偏转角变化 CpC（0 ~ 360）。
    相机中心点在焦平面中移动。
    相机中心点可沿前向量在水平面投影前后移动。
    在3D模式下，相机的俯仰角在一定范围内变化（-CcFv ~ +CcFV），同时影响前向量。

模型显示窗口（OpenGL窗口）
    显示2D模型、3D模型。

模型周边窗口
    包围在模型显示窗口周边的滚动条和按钮。
    周边滚动条可移动视窗位置。
    按钮可缩放视图。
    旋转按钮可调整视窗角或者侧切角。

俯视全局图窗口
    地图背景，叠加显示场区范围、视窗范围和方向等信息。
    侧视图切面投影线。

侧视全局图窗口
    场区及周边水域和陆地侧切轮廓。
    侧切面与陆地及海底交线。场区范围水平投影。视窗范围水平投影。
    俯视图深度投影线。

平面坐标系 HorzFace
    平面坐标系，以世界坐标系中心为原点，X轴为X轴，-Z轴为Y轴（向东为X轴，向北为Y轴）。
    世界坐标系的XZ平面，绕世界坐标系Y轴旋转A角。
    俯视图的2D模式下，视窗在在平面坐标系中移动。相机在平面坐标系投影点为相机平面坐标。
    A角称为俯视图视窗角。
    A角与CgF是一致的。

水平移动范围 LevelRange
    限制俯视图相机水平移动范围。相机平面坐标范围：-D2*Eh ~ D2*Eh。
    Eh = 1.2。

俯视图视窗参数
    <视窗角A，视窗坐标XY>

侧切坐标系 VertFace
    侧视图2D模式下，切面上的2维坐标系，世界坐标系原点在切面的垂直投影点为原点。
    深度方向为-Y轴，X轴同世界坐标系。
    侧切平面绕世界坐标系Y轴旋转角为侧切角A（）。
    侧切面与世界坐标系原点距离为侧切距D（）。

侧面移动范围
    限制相机在侧切面上移动范围。
    上下以深度为参考，-D*Ev ~ D*(1+Ev)。
    Ev = 1.2。
    水平方向与水平移动范围一致。

侧视图视窗参数
    <侧切角A，侧切距，D，侧移坐标XD>。

参数窗口
    数字方式显示侧视图的相关参数，可输入或通过按钮修改。
    侧视图参数窗口；
    俯视图参数窗口；
    3D模型参数窗口。

BBS对象
    参与参数控制的窗口包括：
    3种参数窗口；
    2种全局图窗口；
    模型显示窗口；
    模型周边窗口；
    颜色映射表选择；
    视景列表窗口；
    声场区列表窗口。
    上述窗口均可影响到建模、视图和相机参数，均能显示部分参数。
    为此通过BBS对象转发相关消息。修改了参数的窗口向BBS对象发送消息。
    其它窗口相应BBS转发的消息，修改参数显示、刷新建模等。

